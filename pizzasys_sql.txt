DROP TABLE IF EXISTS tbl_user;
CREATE TABLE tbl_user
(
 user_id int auto_increment primary key,
 email varchar(255),
 password varchar(255),
 security_question varchar(255),
 security_answer varchar(255),
 active boolean,
 entry_date datetime,
 last_login timestamp
);

DROP TABLE IF EXISTS tbl_order;
CREATE TABLE tbl_order
(
 order_id int auto_increment primary key,
 size int(1) not null,
 crush int(1) null,
 sauce int(1) not null,
 cheese int(1) not null,
 topping varchar(255) not null,
 order_time timestamp
);

DROP TABLE IF EXISTS tbl_user_order;
CREATE TABLE tbl_user_order
(
 user_id int not null, 
 order_id int not null,
 number int not null,
 address varchar(255) not null,
 PRIMARY KEY(user_id, order_id),
 FOREIGN KEY(user_id)  REFERENCES tbl_user(user_id),
 FOREIGN KEY(order_id) REFERENCES tbl_order(order_id)
);

INSERT INTO tbl_user(email, password, security_question, security_answer, active, entry_date, last_login) VALUES
('a@gmail.com', '123', 'A', 'B', 1, NOW(), CURRENT_TIMESTAMP());

INSERT INTO tbl_order(size, crush, sauce, cheese, topping, order_time) VALUES(
2,1,3,2,'topping', CURRENT_TIMESTAMP());


DROP TABLE IF EXISTS tbl_crust;
CREATE TABLE tbl_crust
(
 id int not null auto_increment primary key,
 name varchar(255) not null
);

DROP TABLE IF EXISTS tbl_sauce;
CREATE TABLE tbl_sauce
(
 id int not null auto_increment primary key,
 name varchar(255) not null
);

DROP TABLE IF EXISTS tbl_cheese;
CREATE TABLE tbl_cheese
(
 id int not null auto_increment primary key,
 name varchar(255) not null
);

DROP TABLE IF EXISTS tbl_toppings;
CREATE TABLE tbl_toppings
(
 id int not null auto_increment primary key,
 name varchar(255) not null
);

